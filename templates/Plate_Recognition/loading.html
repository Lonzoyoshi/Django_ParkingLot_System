<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>加载中</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>加载中...</h1>
        <p>请稍候，正在处理您的请求。</p>
        <a href="/plate/load_params/">返回加载参数页面</a>
    </div>

    <script>
        // 定期检查处理是否完成
        const checkInterval = setInterval(() => {
            fetch(`/plate/check_result/`)
                .then(response => response.json())
                .then(data => {
                    if (data.result_ready) {
                        clearInterval(checkInterval); // 停止定时器
                        {% if camera_mode %}
                        window.location.href = `/plate/live_camera/`; // 跳转到摄像头页面
                        {% else %}
                        window.location.href = `/plate/result/`; // 跳转到结果页面
                        {% endif %}
                    }
                })
                .catch(error => {
                    console.error('Error checking result:', error);
                });
        }, 3000); // 每 3 秒检查一次
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
